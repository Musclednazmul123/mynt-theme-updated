{%- if form_id -%}
  {%- form 'customer', id: form_id -%}
    {%- if form.posted_successfully? -%}
      <p><em>{{ 'general.newsletter_form.thank_you' | t }}</em></p>
    {%- elsif form.errors -%}
      {%- for field in form.errors -%}
        <p><em>{{ field }} - {{ form.errors.messages[field] }}</em></p>
      {%- endfor -%}
    {%- endif -%}

    <input type="hidden" name="contact[accepts_marketing]" value="true">
    
    {%- if show_name -%}
      <div class="input-group input-group--fullwidth newsletter-form">
        <input type="text" name="contact[first_name]" class="input-group-field" aria-label="{{ 'general.newsletter_form.first_name' | t }}" placeholder="{{- 'general.newsletter_form.first_name' | t -}}" value="{%- if customer -%} {{ customer.first_name }} {%- endif -%}"> 
      </div>  
    {%- endif -%}

    <div class="input-group newsletter-form">
      <input type="email" id="{{ field_id }}" class="input-group-field" placeholder="{{ 'general.newsletter_form.newsletter_email' | t }}" aria-label="{{ 'general.newsletter_form.newsletter_email' | t }}" autocorrect="off" autocapitalize="off" name="contact[email]" />

      {%- unless button_text -%}
        {%- assign button_text = 'general.newsletter_form.submit' | t -%}
      {%- endunless -%}
      
      <span class="input-group-btn">
        <img src="https://cdn.shopify.com/s/files/1/0271/7650/1296/files/keyboard_arrow_right.svg?v=1623973649" alt="Join">
        <input type="submit" class="btn caps" name="subscribe" id="{{ button_id }}" value="{{ button_text }}">
      </span>
    </div>
  {%- endform -%}
{%- endif -%}
