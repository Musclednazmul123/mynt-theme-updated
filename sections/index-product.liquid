<!-- /sections/index-product.liquid -->

{%- assign product = all_products[section.settings.home_product] | default: collections['all'].products[0] -%}
{%- assign product = all_products[section.settings.home_product] -%}

<div class="index-product"
  data-section-id="{{ section.id }}"
  data-section-type="product"
  data-tall-layout="false"
  data-mobile-thumbs-slider="true"
  data-enable-history-state="false"
  data-image-zoom-enable="{{ section.settings.enable_zoom }}"
  data-video-looping="{{ section.settings.enable_video_looping }}"
  data-reviews="{{ settings.enable_product_reviews }}">
  {% if product.empty? %}
    {% render 'onboarding-product', section: section, unique: section.id %}
  {% else %}
    {% render 'product', product: product, section: section, unique: section.id %}
  {% endif %}
</div>

{% schema %}
  {
    "name": "Featured product",
    "settings": [
      {
        "type": "product",
        "id": "home_product",
        "label": "Product"
      },
      {
        "type": "header",
        "content": "Product description"
      },
      {
        "type": "select",
        "id": "style",
        "label": "Tab style",
        "default": "inline",
        "options": [
          { "value": "inline", "label": "None" },
          { "value": "tabs", "label": "Tabs" },
          { "value": "accordions", "label": "Accordions" }
        ]
      },
      {
        "type": "select",
        "id": "subheading_option",
        "label": "Navigation",
        "default": "none",
        "options": [
          { "value": "none", "label": "None" },
          { "value": "vendor", "label": "Vendor" },
          { "value": "collection", "label": "Collection" }
        ]
      },
      {
        "type": "checkbox",
        "id": "show_share_buttons",
        "label": "Show social sharing buttons",
        "default": false
      },
      {
        "type": "header",
        "content": "Product form"
      },
      {
        "type": "checkbox",
        "id": "show_labels",
        "label": "Show variant labels",
        "default": false
      },
      {
        "type": "checkbox",
        "id": "show_payment_button",
        "label": "Show dynamic checkout buttons",
        "info": "Each customer will see their preferred payment method from those available on your store, such as PayPal or Apple Pay. [Learn more](https://help.shopify.com/en/manual/online-store/os/dynamic-checkout)",
        "default": true
      },
      {
        "type": "header",
        "content": "Media",
        "info": "Learn more about [media types](https://help.shopify.com/manual/products/product-media)"
      },
      {
        "type": "checkbox",
        "id": "enable_zoom",
        "label": "Enable zoom",
        "default": true
      },
      {
        "type": "checkbox",
        "id": "enable_video_looping",
        "label": "Enable video looping",
        "default": false
      },
      {
        "type": "header",
        "content": "Subscriptions",
        "info": "Learn more about [subscriptions](https://help.shopify.com/en/manual/products/subscriptions)"
      },
      {
        "type": "checkbox",
        "id": "subscriptions_enable_selectors",
        "label": "Enable subscription selectors",
        "info": "Shown on products with subscription options",
        "default": true
      }
    ],
    "blocks": [
      {
        "type": "tab_description",
        "name": "Custom tabs",
        "limit": 1,
        "settings": [
          {
            "type": "paragraph",
            "content": "Used to create tabs that are unique to each product.  Headings inside the product desription will break the product description into tab content.  H6 headings must be used. The heading will become the tab title and the tab content will be everything below the H6 heading. [Learn more](https://invisiblethemes.com/link/broadcast/docs/tabs)."
          }
        ]
      },
      {
        "type": "tab_richtext",
        "name": "Text",
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "Heading",
            "default": "Heading",
            "info": "Example: Warranty policy"
          },
          {
            "type": "richtext",
            "id": "raw_content",
            "label": "Text",
            "default": "<p>This content type will accept <strong>rich text</strong> to help with adding styles and links to additional pages or content. Use this to add supplementary information to help your buyers.</p>"
          }
        ]
      },
      {
        "type": "tab_html",
        "name": "HTML",
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "Heading",
            "default": "Heading",
            "info": "Example: Sizing video"
          },
          {
            "type": "html",
            "id": "raw_content",
            "label": "Text",
            "default": "<p>This content type will accept HTML code for advanced styling. Use this to add video embeds, or other advanced HTML content.</p>"
          }
        ]
      },
      {
        "type": "tab_page",
        "name": "Page",
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "Heading",
            "default": "Heading",
            "info": "Example: Size chart"
          },
          {
            "type": "page",
            "id": "raw_content",
            "label": "Page"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Featured product",
        "category": "Product",
        "blocks": [
          {
            "type": "tab_description"
          }
        ]
      }
    ]
  }
{% endschema %}
